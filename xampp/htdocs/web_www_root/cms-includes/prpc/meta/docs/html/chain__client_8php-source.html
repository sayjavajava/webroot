<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>PRPC: chain_client.php Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.3 -->
<h1>chain_client.php</h1><div class="fragment"><pre>00001 &lt;?php
00002 
00003 require_once ('prpc.1.php');
00004 
00005 $host = 'prpc:<span class="comment">//'.$_SERVER['SERVER_NAME'].'/';</span>
00006 $url = $host.'chain_server.0.php';
00007 
00008 $url = isset ($_REQUEST['url']) ? $_REQUEST['url'] : $url;
00009 $method = isset ($_REQUEST['method']) ? $_REQUEST['method'] : 'Chain';
00010 
00011 $trace['file'] = isset ($_REQUEST['trace']['file']) ? $_REQUEST['trace']['file'] : PRPC_TRACE_FILE;
00012 $trace['call'] = isset ($_REQUEST['trace']['call']) ? $_REQUEST['trace']['call'] : PRPC_TRACE_CALL;
00013 $trace['result'] = isset ($_REQUEST['trace']['result']) ? $_REQUEST['trace']['result'] : 0;
00014 
00015 <span class="keywordflow">if</span> (isset ($_REQUEST['args']))
00016 {
00017     eval ('$args = '.$_REQUEST['args'].<span class="charliteral">';'</span>);
00018 }
00019 <span class="keywordflow">else</span>
00020 {
00021     $args = array
00022     (
00023         preg_replace ('/(prpc:\/\/[^\/]+\/).*/', '$1', $url),
00024         array
00025         (
00026             <span class="charliteral">'1'</span> =&gt; array (),
00027             <span class="charliteral">'2'</span> =&gt; array (),
00028             <span class="charliteral">'1'</span> =&gt; array
00029             (
00030                 <span class="charliteral">'2'</span> =&gt; array (),
00031                 <span class="charliteral">'1'</span> =&gt; array ()
00032             )
00033         )
00034     );
00035 }
00036 
00037 ?&gt;
00038 
00039 &lt;form action=<span class="stringliteral">"&lt;?php echo $_SERVER ['PHP_SELF']; ?&gt;"</span>&gt;
00040 
00041 &lt;table&gt;
00042     &lt;tr&gt;
00043         &lt;td&gt;URL&lt;/td&gt;
00044         &lt;td&gt;&lt;input type=<span class="stringliteral">"text"</span> name=<span class="stringliteral">"url"</span> value=<span class="stringliteral">"&lt;?php echo $url; ?&gt;"</span> size=<span class="stringliteral">"75"</span>&gt;&lt;/td&gt;
00045     &lt;/tr&gt;
00046     &lt;tr&gt;
00047         &lt;td&gt;Method&lt;/td&gt;
00048         &lt;td&gt;&lt;input type=<span class="stringliteral">"text"</span> name=<span class="stringliteral">"method"</span> value=<span class="stringliteral">"&lt;?php echo $method; ?&gt;"</span> size=<span class="stringliteral">"75"</span>&gt;&lt;/td&gt;
00049     &lt;/tr&gt;
00050     &lt;tr&gt;
00051         &lt;td&gt;Args&lt;/td&gt;
00052         &lt;td&gt;&lt;textarea name=<span class="stringliteral">"args"</span> rows=<span class="stringliteral">"20"</span> cols=<span class="stringliteral">"75"</span>&gt;&lt;?php var_export ($args); ?&gt;&lt;/textarea&gt;&lt;/td&gt;
00053     &lt;/tr&gt;
00054     &lt;tr&gt;
00055         &lt;td&gt;Trace&lt;/td&gt;
00056         &lt;td&gt;
00057             &lt;input type=<span class="stringliteral">"checkbox"</span> name=<span class="stringliteral">"trace[file]"</span> value=<span class="stringliteral">"&lt;?php echo PRPC_TRACE_FILE; ?&gt;"</span>&lt;?php echo $trace['file'] == PRPC_TRACE_FILE ? <span class="stringliteral">" checked"</span> : <span class="stringliteral">""</span>; ?&gt;&gt; File&amp;nbsp;&amp;nbsp;
00058             &lt;input type=<span class="stringliteral">"radio"</span> name=<span class="stringliteral">"trace[call]"</span> value=<span class="stringliteral">"&lt;?php echo PRPC_TRACE_CALL; ?&gt;"</span>&lt;?php echo $trace['call'] == PRPC_TRACE_CALL ? <span class="stringliteral">" checked"</span> : <span class="stringliteral">""</span>; ?&gt;&gt; Call&amp;nbsp;&amp;nbsp;
00059             &lt;input type=<span class="stringliteral">"radio"</span> name=<span class="stringliteral">"trace[call]"</span> value=<span class="stringliteral">"&lt;?php echo PRPC_TRACE_ARGS; ?&gt;"</span>&lt;?php echo $trace['call'] == PRPC_TRACE_ARGS ? <span class="stringliteral">" checked"</span> : <span class="stringliteral">""</span>; ?&gt;&gt; Args&amp;nbsp;&amp;nbsp;
00060             &lt;input type=<span class="stringliteral">"checkbox"</span> name=<span class="stringliteral">"trace[result]"</span> value=<span class="stringliteral">"&lt;?php echo PRPC_TRACE_RESULT; ?&gt;"</span>&lt;?php echo $trace['result'] == PRPC_TRACE_RESULT ? <span class="stringliteral">" checked"</span> : <span class="stringliteral">""</span>; ?&gt;&gt; Result&amp;nbsp;&amp;nbsp;
00061         &lt;/td&gt;
00062     &lt;/tr&gt;
00063     &lt;tr&gt;
00064         &lt;td align=<span class="stringliteral">"center"</span> colspan=<span class="stringliteral">"2"</span>&gt;
00065             &lt;input type=<span class="stringliteral">"hidden"</span> name=<span class="stringliteral">"action"</span> value=<span class="stringliteral">"invoke"</span>&gt;
00066             &lt;input type=<span class="stringliteral">"submit"</span> name=<span class="stringliteral">"Invoke"</span> value=<span class="stringliteral">"Invoke"</span>&gt;
00067         &lt;/td&gt;
00068     &lt;/tr&gt;
00069 &lt;/table&gt;
00070 
00071 &lt;/form&gt;
00072 
00073 &lt;?php
00074 
00075 <span class="keywordflow">if</span> ($_REQUEST['action'] == 'invoke')
00076 {
00077 
00078     echo '&lt;hr&gt;&lt;pre&gt;';
00079 
00080     foreach ($trace as $opt)
00081     {
00082         $sum += $opt;
00083     }
00084 
00085     $rpc = <span class="keyword">new</span> <a class="code" href="classPrpc__Client.html">Prpc_Client</a> ($url, TRUE, $sum);
00086 
00087     <span class="comment">//$result = call_user_func_array (array (&amp;$rpc, $method), $args);</span>
00088     $result = $rpc-&gt;$method ($args[0], $args[1]);
00089 
00090     print_r ($rpc-&gt;_prpc_debug);
00091     echo <span class="stringliteral">"\n\n"</span>;
00092 
00093     <span class="comment">//echo "\n\n", '---Result---', "\n\n"; print_r ($result); echo "\n\n";</span>
00094 }
00095 
00096 ?&gt;
</pre></div>	<hr size="1">
	<address style="align: right;">
		<small>Generated on Fri Jul 18 15:03:44 2003</small>
	</address>
</body>
</html>
